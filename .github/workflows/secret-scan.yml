name: Secret Scan

on:
  pull_request:
    branches:
      - main

jobs:
  secret_scan:
    name: Validate secrets
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run secrets validation script
        env:
          CI: true
        run: |
          if [ -f backend/scripts/validate-secrets.sh ]; then
            bash backend/scripts/validate-secrets.sh
          else
            echo "No secrets validation script found at backend/scripts/validate-secrets.sh" && exit 1
          fi
